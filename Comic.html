<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bunnyfolks</title>
<style>
/* ================= GENERAL ================= */
html, body {
    margin: 0;
    padding: 0;
    overflow-x:clip;
    height: 100%;
    }

.page {
    position: relative;
    width: 100%;
    min-height: 100vh;    
    }

.bg2 {
    width: 100%;
    height: auto;
    display: block;
}

.copyright {width:25%; position:absolute; left:37%;}

.Blogo {
    position: absolute;
    top: 1.9%;
    left: 50%;
    transform: translateX(-48%);
    z-index: 3;
    width: 60vw; /* This will work now! */
    max-width: 2000px;
}

.Blogo img {
    width: 100%;
    height: auto;
    display: block;
}

.BP1, .hands {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 70vw;
    max-width: 700px;
    transform: translate(-50%, -50%);
}
.BP1 { z-index: 1; transform: translateY(-49%) translateX(-50%);}
.hands { 
    z-index: 200;
    pointer-events: none;
    transform: translate(-78.3%, 19.1%) scale(4.92);
}
.hands img { width: 100%; height: auto; display: block; }

.starburger-button {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    margin-top: 585px;
    margin-left: 19px;
    width: 60px;
    cursor: pointer;
    z-index: 99;
    transition: transform 0.2s, filter 0.2s;
}
.starburger-button:hover { transform: translate(-50%, -50%) scale(1.2); filter: brightness(1.2); }

/* ================= DESKTOP COUNT ================= */
.Count {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 70vw;
    height: 0;
    aspect-ratio: 7/10;
    transform: translate(-50%, -50%);
    pointer-events: none;
    cursor: pointer;
    z-index: 99;
}
.Count img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    transition: transform 0.2s, filter 0.2s;
    z-index: 105;
}

.first    { width: 80px;  margin-left: -300px; margin-top: 580px; }
.back-nav { width: 180px; margin-left: -150px; margin-top: 580px; }
.next-nav { width: 180px; margin-left: 180px;  margin-top: 580px; }
.last     { width: 80px;  margin-left: 335px;  margin-top: 580px; }

.Count img:hover { transform: translate(-50%, -50%) scale(1.1); filter: brightness(1.2); }

/* ================= DESKTOP SOCIALS ================= */
/* ================= DESKTOP SOCIALS ================= */
.Socials.desktop-only {
    position: absolute;
    top: 90%;
    left: 50%;
    transform: translateX(-50%);
    
    /* These three lines are the key to making 'gap' work */
    display: flex !important;
    flex-direction: row;
    width: auto; 
    
    /* Increase this number to widen the space */
    gap: 100px; 
    
    z-index: 99;
    pointer-events: auto;
}

/* Ensure the links don't have their own absolute positioning fighting the gap */
.Socials.desktop-only a {
    position: relative; 
    transform: none; 
    left: auto;
    display: block;
}

.Socials a:hover { transform: scale(1.1); filter: brightness(1.2); }
.Socials img { width: 80px; height: auto; display: block; }
.Socials .tiktok-img { width: 50px !important; }

/* ================= MENU ================= */
.menu-pages {
    display: grid;
    grid-template-columns: repeat(5, minmax(0, 1fr));
    gap: 12px;
    position: absolute;
    top: 65%;
    left: 53%;
    transform: translateX(-47%);
    width: min(80%, 900px);
    z-index: 100;
}
.menu { 
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: auto;
    z-index: 10000;
    pointer-events: none;
    display: none; /* Let JS handle the display */
}

/* The Bounce Trigger */
.menu.menu-animate {
    display: block !important;
    opacity: 1;
    pointer-events: auto;
    /* This 'cubic-bezier' is the secret to the elastic bounce */
    animation: menuBounceUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes menuBounceUp {
    0% { 
        transform: translateY(100%); 
        opacity: 0; 
    }
    100% { 
        transform: translateY(0); 
        opacity: 1; 
    }
}
.menu-pages a { display: block; z-index: 101; }
.menu-pages a img { width: 120%; max-width: 130px; display: block; height: auto; }
.menu-pages img { width: 90px; max-width: 100%; height: auto; transition: transform 0.2s, filter 0.2s; }
.menu-pages img:hover { transform: scale(1.1); filter: brightness(1.15); }
.menu-container { position: relative; width: 100%; height: auto; pointer-events: auto; }
.menu-bg { width: 100%; height: auto; display: block; position: relative; z-index: 1; }
.Close1-button {cursor:pointer; position: absolute; top: 55%; right: 5%; width: 12%; max-width: 150px; z-index: 10; }
.TOC-button { position: absolute; width: 25%; top: 60%; left: 51%; transform: translateX(-50%); z-index: 10; }
.Close1-button:hover { transform: scale(1.2); filter: brightness(1.2); }

/* Only hide socials when the menu is actually VISIBLE */
#nav-menu.menu-animate ~ .Socials { 
    display: none !important; 
}

.Socials.desktop-only, .Socials.mobile-only {
    z-index: 9999 !important; /* This puts them on top of EVERYTHING */
}

.menu.menu-animate ~ .Socials,
.menu.menu-animate ~ .Count,
.menu.menu-animate ~ .starburger-button { display: none !important; }
@keyframes menuSlideUp { 0% { transform: translateY(100%); opacity: 0; } 100% { transform: translateY(0); opacity: 1; }
 }
/* Animation for the "Push" effect */
.Count-mobile img:active, 
.Socials.mobile-only img:active,
.starburger-button:active {
    transform: translateX(-50%) scale(0.9); /* Shrinks slightly and maintains centering */
    filter: brightness(0.8); /* Dims slightly to look like it's being pressed down */
    transition: transform 0.1s ease; /* Fast response for the press */
}

/* ================= MOBILE ================= */

@media screen and (max-width: 600px) {
    .Socials.desktop-only { display: none !important; }
    
    /* These keep your other toggles working */
    .desktop-only { display: none !important; }
    .mobile-only { display: flex !important; }

    .starburger-button { top: auto; bottom: 230px; left: 53%; width: 50px; margin: 0; transform: translateX(-50%); }
    
    .Count-mobile {
        position: absolute; bottom: 280px; left: 0; width: 100%; z-index: 998;
        display: flex; justify-content: center; pointer-events: none;
    }
    .Count-mobile img { pointer-events: auto; position: absolute; transform: translateX(-50%); }
    .m-first { width: 35px; left: calc(50% - 135px); }
    .m-back-nav { width: 80px; left: calc(50% - 70px); bottom: -35px; }
    .m-next-nav { width: 80px; left: calc(50% + 75px); bottom: -35px; }
    .m-last { width: 35px; left: calc(50% + 140px); }

  .Socials.mobile-only {
    position: absolute !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    display: flex !important;
    
    bottom: 80px !important; 
    margin-left: 10px !important; 

    width: 100% !important;
    justify-content: center;
    align-items: center;
    gap: 30px;
    z-index: 997;
    pointer-events: auto;
}
    .Socials.mobile-only img { width: 40px; }
    .Socials.mobile-only img.tiktok-img { width: 25px !important; }
    
    /* Order of icons: Webtoon, IG, TikTok, Shop */
    .Socials.mobile-only .Webtoon { order: 1; }
    .Socials.mobile-only .IG { order: 2; }
    .Socials.mobile-only .tiktok { order: 3; } /* TikTok is now moved to the right of IG */
    .Socials.mobile-only .Shop { order: 4; }

    .hands { transform: translate(-78.3%, 17.8%) scale(4.92); }
}

/* Show desktop by default */
.desktop-only { display: block; }
.mobile-only { display: none; }

</style>
</head>
<body>

<div class="page">
    <img src="Img/bg2.png" class="bg2" alt="Background">
    <img src="Img/copyright.png" class="copyright" alt="copyright">

    <div class="BP1">
        <img id="comic-main" src="Chapters/BP1.jpg" alt="Comic Page" style="width:100%;height:auto;">
    </div>

    <div class="Blogo">
        <a href="index.html"><img src="Img/Blogo.gif" alt="Logo"></a>
    </div>

    <div class="hands"><img src="Img/hands.png" alt="Hands"></div>

    <!-- MENU -->
    <div id="nav-menu" class="menu">
        <div class="menu-container">
            <img src="Menu/menu.png" class="menu-bg">
            <img src="Menu/Close1.png" class="Close1-button" onclick="toggleMenu()">
            <img src="Menu/TOC.png" class="TOC-button">
            <div class="menu-pages" id="toc-grid"></div>
        </div>
    </div>

    <!-- STARBURGER -->
    <img src="Menu/starburger.png" class="starburger-button" onclick="toggleMenu()">

    <!-- COUNT NAVIGATION DESKTOP -->
    <div class="Count desktop-only">
        <img src="Count/first.png" class="first" onclick="goToPage(1)">
        <img src="Count/back-nav.png" class="back-nav" onclick="changePage(-1)">
        <img src="Count/next-nav.png" class="next-nav" onclick="changePage(1)">
        <img src="Count/last.png" class="last" onclick="goToPage(23)">
    </div>

    <!-- COUNT NAVIGATION MOBILE -->
    <div class="Count-mobile mobile-only">
        <img src="Count/first.png" class="m-first" onclick="goToPage(1)">
        <img src="Count/back-nav.png" class="m-back-nav" onclick="changePage(-1)">
        <img src="Count/next-nav.png" class="m-next-nav" onclick="changePage(1)">
        <img src="Count/last.png" class="m-last" onclick="goToPage(23)">
    </div>

    <!-- SOCIALS -->
    <!-- Desktop socials -->
<div class="Socials desktop-only">
    <a href="https://webtoon.com" target="_blank"><img src="Socials/Webtoon.png" class="Webtoon"></a>
    <a href="https://www.tiktok.com/@chroniclesighs?_r=1&_t=ZT-93Bz7zmGWIx" target="_blank"><img src="Socials/tiktok.png" class="tiktok-img"></a>
    <a href="https://www.instagram.com/chroniclesighs?igsh=MWJibzhlcGM0NTFjdQ==" target="_blank"><img src="Socials/IG.png" class="IG"></a>
    <a href="https://shop.com" target="_blank"><img src="Socials/Shop.png" class="Shop"></a>
</div>

<!-- Mobile socials -->
<div class="Socials mobile-only">
    <a href="https://webtoon.com" target="_blank"><img src="Socials/Webtoon.png" class="Webtoon"></a>
    <a href="https://www.tiktok.com/@chroniclesighs?_r=1&_t=ZT-93Bz7zmGWIx" target="_blank"><img src="Socials/tiktok.png" class="tiktok-img"></a>
    <a href="https://www.instagram.com/chroniclesighs?igsh=MWJibzhlcGM0NTFjdQ==" target="_blank"><img src="Socials/IG.png" class="IG"></a>
    <a href="https://shop.com" target="_blank"><img src="Socials/Shop.png" class="Shop"></a>
</div>

</div>

<script>
let currentPage = 1;
const totalPages = 23;

function changePage(step) {
    let newPage = currentPage + step;
    if(newPage>=1 && newPage<=totalPages){ goToPage(newPage); }
}

function goToPage(pageNum) {
    currentPage = pageNum;
    document.getElementById('comic-main').src = `Chapters/BP${currentPage}.jpg`;
    const menu = document.getElementById('nav-menu');
    menu.classList.remove('menu-animate');
    menu.style.display = 'none';
}

let isMenuOpen = false; // Track the state manually for instant response

function toggleMenu() {
    const menu = document.getElementById('nav-menu');
    
    if (!isMenuOpen) {
        menu.style.display = 'block';
        void menu.offsetWidth; // This is the "Magic Line" that ensures the bounce plays
        menu.classList.add('menu-animate');
        isMenuOpen = true;
    } else {
        menu.classList.remove('menu-animate');
        setTimeout(() => {
            if (!isMenuOpen) menu.style.display = 'none';
        }, 500); 
        isMenuOpen = false;
    }
}

// Build TOC pages
const grid = document.getElementById('toc-grid');
for(let i=1;i<=totalPages;i++){
    const btn = document.createElement('a');
    btn.style.cursor = "pointer";
    btn.innerHTML = `<img src="Menu/Pg${i}.png" alt="Page ${i}">`;
    btn.onclick = function(){ goToPage(i); };
    grid.appendChild(btn);
}
</script>
</body>
</html>
